<!DOCTYPE html>
<html>
<head>
  <title>Refined Prompt Head Component - Testing Interface</title>
  <link href="prompts-site-webflow-export/css/main.css" rel="stylesheet" type="text/css">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin="anonymous">
  <script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js" type="text/javascript"></script>
  <script type="text/javascript">WebFont.load({  google: {    families: ["Inconsolata:400,700","Nunito Sans:200,300,regular,500,800","Playfair Display:regular,500,600,700,800,italic,500italic,600italic,700italic,800italic","Cousine:regular,700","Playfair Display:regular,500,600,700,800,500italic,600italic,700italic,800italic","Material Icons:regular"]  }});</script>
  <style>
    body { 
      font-family: Arial, sans-serif; 
      background: #f5f5f5;
      margin: 0;
      padding: 20px;
    }
    
    .testing-header {
      background: white;
      padding: 20px;
      border-radius: 8px;
      margin-bottom: 20px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    
    .test-section {
      background: white;
      border-radius: 8px;
      margin-bottom: 20px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      overflow: hidden;
    }
    
    .test-section-header {
      background: #007bff;
      color: white;
      padding: 15px 20px;
      font-weight: bold;
    }
    
    .test-section-content {
      padding: 20px;
    }
    
    .test-controls {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }
    
    .test-button {
      padding: 10px 20px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
      transition: all 0.2s;
    }
    
    .test-button.primary { background: #007bff; color: white; }
    .test-button.success { background: #28a745; color: white; }
    .test-button.warning { background: #ffc107; color: black; }
    .test-button.danger { background: #dc3545; color: white; }
    .test-button.secondary { background: #6c757d; color: white; }
    
    .test-button:hover { opacity: 0.8; }
    
    .component-container {
      border: 2px solid #dee2e6;
      border-radius: 8px;
      padding: 20px;
      margin: 20px 0;
      position: relative;
      background: white;
    }
    
    .component-label {
      position: absolute;
      top: -12px;
      left: 15px;
      background: white;
      padding: 0 10px;
      font-size: 12px;
      font-weight: bold;
      border-radius: 4px;
    }
    
    .static-container {
      border-color: #ffc107;
    }
    
    .static-container .component-label {
      color: #ffc107;
    }
    
    .component-test-container {
      border-color: #28a745;
    }
    
    .component-test-container .component-label {
      color: #28a745;
    }
    
    .comparison-container {
      border-color: #007bff;
    }
    
    .comparison-container .component-label {
      color: #007bff;
    }
    
    .side-by-side {
      display: flex;
      gap: 20px;
    }
    
    .side-by-side > * {
      flex: 1;
    }
    
    .test-results {
      background: #f8f9fa;
      border-radius: 4px;
      padding: 15px;
      margin-top: 20px;
      font-family: monospace;
      font-size: 14px;
      white-space: pre-wrap;
    }
    
    .approval-section {
      background: #e9ecef;
      border-radius: 8px;
      padding: 20px;
      margin-top: 20px;
      text-align: center;
    }
    
    .status-indicator {
      display: inline-block;
      width: 12px;
      height: 12px;
      border-radius: 50%;
      margin-right: 8px;
    }
    
    .status-pending { background: #ffc107; }
    .status-pass { background: #28a745; }
    .status-fail { background: #dc3545; }
    
    .quick-links {
      background: white;
      padding: 15px;
      border-radius: 8px;
      margin-bottom: 20px;
    }
    
    .quick-links a {
      display: inline-block;
      margin-right: 15px;
      padding: 8px 12px;
      background: #f8f9fa;
      text-decoration: none;
      border-radius: 4px;
      color: #495057;
      font-size: 14px;
    }
    
    .quick-links a:hover {
      background: #e9ecef;
    }
  </style>
</head>
<body>
  <div class="testing-header">
    <h1>🧪 Refined Prompt Head Component - Testing Interface</h1>
    <p>This interface allows you to test the refined component against the existing static implementation before making any changes to the live site.</p>
    
    <div class="quick-links">
      <strong>Test on actual pages:</strong>
      <a href="prompts-site-webflow-export/work/assessments.html?test-component=test" target="_blank">Test Mode - Assessments</a>
      <a href="prompts-site-webflow-export/personal/quiz-me.html?test-component=comparison" target="_blank">Comparison Mode - Quiz Me</a>
      <a href="prompts-site-webflow-export/work/jira.html?test-component=test" target="_blank">Test Mode - Jira</a>
    </div>
  </div>

  <div class="test-section">
    <div class="test-section-header">
      📊 Component Comparison
    </div>
    <div class="test-section-content">
      <div class="test-controls">
        <button class="test-button primary" onclick="showStatic()">Show Static Only</button>
        <button class="test-button success" onclick="showComponent()">Show Component Only</button>
        <button class="test-button warning" onclick="showComparison()">Show Side-by-Side</button>
        <button class="test-button secondary" onclick="runAutomatedTests()">Run Automated Tests</button>
      </div>

      <!-- Static Version -->
      <div id="static-container" class="component-container static-container">
        <div class="component-label">Static Version (Current)</div>
        <div class="universal-prompt-head">
          <div class="logo-lockup-ctnr">
            <div class="w-layout-hflex logo-image-container">
              <a href="prompts-site-webflow-export/index.html" class="home-link w-inline-block">
                <img src="prompts-site-webflow-export/images/Fat-Logo.svg" loading="lazy" alt="" class="logo-image">
              </a>
            </div>
          </div>
          <div class="sidebar-toggle">
            <div class="sb-toggle-state _1">
              <div>Show prompts list</div>
            </div>
            <div class="sb-toggle-state _2">
              <div>Fullscreen</div>
            </div>
          </div>
          <div class="copied">
            <div class="copied-content">
              <div>Copied!</div>
            </div>
            <div data-w-id="924aa154-11da-880c-f3f5-8b080d169af3" data-animation-type="lottie" data-src="prompts-site-webflow-export/documents/Animation---1719531472609.json" data-loop="0" data-direction="1" data-autoplay="1" data-is-ix2-target="0" data-renderer="svg" data-default-duration="3" data-duration="2"></div>
          </div>
          <div class="mobile-menu-icon"></div>
          <div class="services-dropdown-trigger">
            <a href="https://chat.openai.com/?model=gpt-4-code-interpreter" target="_blank" class="universal-heading-icon gpt w-inline-block">
              <div class="tooltip">
                <div>ChatGPT</div>
              </div>
              <div class="icon home">
                <img src="prompts-site-webflow-export/images/GPT-Icon.svg" loading="eager" alt="ChatGPT Logo" class="ai-icon">
              </div>
            </a>
            <a href="https://claude.ai/" target="_blank" class="universal-heading-icon gpt w-inline-block">
              <div class="tooltip">
                <div>Claude</div>
              </div>
              <div class="icon home">
                <img src="prompts-site-webflow-export/images/claude-logo.svg" loading="eager" alt="Claude Logo" class="ai-icon">
              </div>
            </a>
            <div class="services-dropdown">
              <div class="icon dropdown-trigger"></div>
              <div class="services-popup-menu">
                <div class="ai-menu-heading">Services</div>
                <div class="link-list">
                  <a href="https://claude.ai/chats" target="_blank" class="block-link w-inline-block">
                    <div class="div-block-15 block-link-ctnr">
                      <div class="div-block-17">
                        <div class="block-link-title">Claude</div>
                        <div class="block-link-arrow"></div>
                      </div>
                    </div>
                  </a>
                  <a href="https://chat.openai.com/?model=gpt-4-code-interpreter" target="_blank" class="block-link w-inline-block">
                    <div class="div-block-15 block-link-ctnr">
                      <div class="div-block-17">
                        <div class="block-link-title">ChatGPT</div>
                        <div class="block-link-arrow"></div>
                      </div>
                    </div>
                  </a>
                  <a href="https://www.perplexity.ai" target="_blank" class="block-link w-inline-block">
                    <div class="div-block-15 block-link-ctnr">
                      <div class="div-block-17">
                        <div class="block-link-title">Perplexity</div>
                        <div class="block-link-arrow"></div>
                      </div>
                    </div>
                  </a>
                  <a href="https://copilot.microsoft.com/" target="_blank" class="block-link w-inline-block">
                    <div class="div-block-15 block-link-ctnr">
                      <div class="div-block-17">
                        <div class="block-link-title">Copilot</div>
                        <div class="block-link-arrow"></div>
                      </div>
                    </div>
                  </a>
                  <a href="https://bard.google.com/" target="_blank" class="block-link w-inline-block">
                    <div class="div-block-15 block-link-ctnr">
                      <div class="div-block-17">
                        <div class="block-link-title">Gemini</div>
                        <div class="block-link-arrow"></div>
                      </div>
                    </div>
                  </a>
                  <a href="https://www.midjourney.com/imagine" target="_blank" class="block-link w-inline-block">
                    <div class="div-block-15 block-link-ctnr">
                      <div class="div-block-17">
                        <div class="block-link-title">Midjourney</div>
                        <div class="block-link-arrow"></div>
                      </div>
                    </div>
                  </a>
                </div>
                <div data-is-ix2-target="1" class="confetti-animation" data-w-id="a9d48a9e-e0bf-3c36-12a0-da43dae50371" data-animation-type="lottie" data-src="prompts-site-webflow-export/documents/Animation---1719531472609.json" data-loop="0" data-direction="1" data-autoplay="0" data-renderer="svg" data-default-duration="3" data-duration="0" data-ix2-initial-state="1"></div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Component Version -->
      <div id="component-container" class="component-container component-test-container" style="display: none;">
        <div class="component-label">Component Version (New)</div>
        <div id="component-target" class="universal-prompt-head">
          <!-- Component will be rendered here -->
        </div>
      </div>

      <!-- Comparison View -->
      <div id="comparison-container" class="component-container comparison-container" style="display: none;">
        <div class="component-label">Side-by-Side Comparison</div>
        <div class="side-by-side">
          <div>
            <h4>Static (Current)</h4>
            <div id="static-clone"></div>
          </div>
          <div>
            <h4>Component (New)</h4>
            <div id="component-clone"></div>
          </div>
        </div>
      </div>

      <div class="test-results" id="test-results">
        Ready to run tests...
      </div>
    </div>
  </div>

  <div class="test-section">
    <div class="test-section-header">
      ✅ Automated Test Results
    </div>
    <div class="test-section-content">
      <div id="automated-tests">
        <div class="test-item">
          <span class="status-indicator status-pending"></span>
          <strong>HTML Structure Match:</strong> <span id="html-match-result">Not tested</span>
        </div>
        <div class="test-item">
          <span class="status-indicator status-pending"></span>
          <strong>Visual Layout Match:</strong> <span id="visual-match-result">Not tested</span>
        </div>
        <div class="test-item">
          <span class="status-indicator status-pending"></span>
          <strong>Interactive Elements:</strong> <span id="interactive-result">Not tested</span>
        </div>
        <div class="test-item">
          <span class="status-indicator status-pending"></span>
          <strong>Path Resolution:</strong> <span id="path-result">Not tested</span>
        </div>
        <div class="test-item">
          <span class="status-indicator status-pending"></span>
          <strong>Responsive Behavior:</strong> <span id="responsive-result">Not tested</span>
        </div>
      </div>
    </div>
  </div>

  <div class="approval-section">
    <h3>🚀 Component Approval</h3>
    <p>After testing, decide whether to approve the component for deployment.</p>
    
    <div style="margin: 20px 0;">
      <button class="test-button success" onclick="approveComponent()" style="font-size: 16px; padding: 15px 30px;">
        ✅ Approve & Deploy Component
      </button>
      <button class="test-button danger" onclick="rejectComponent()" style="font-size: 16px; padding: 15px 30px; margin-left: 10px;">
        ❌ Reject & Keep Static
      </button>
    </div>
    
    <p style="font-size: 14px; color: #666;">
      <strong>Note:</strong> Approval will replace the static implementation across all pages. This action can be rolled back if needed.
    </p>
  </div>

  <!-- Load refined component -->
  <script src="prompts-site-webflow-export/js/refined-prompt-head-component.js"></script>

  <script>
    let refinedComponent = null;
    let testResults = {};

    // Initialize component for testing
    function initializeComponent() {
      const targetElement = document.getElementById('component-target');
      refinedComponent = new RefinedPromptHeadComponent({
        mode: 'test',
        enableTesting: false
      });
      refinedComponent.initialize(targetElement);
    }

    // Show different versions
    function showStatic() {
      document.getElementById('static-container').style.display = 'block';
      document.getElementById('component-container').style.display = 'none';
      document.getElementById('comparison-container').style.display = 'none';
      logTest('Showing static version');
    }

    function showComponent() {
      if (!refinedComponent) initializeComponent();
      
      document.getElementById('static-container').style.display = 'none';
      document.getElementById('component-container').style.display = 'block';
      document.getElementById('comparison-container').style.display = 'none';
      logTest('Showing component version');
    }

    function showComparison() {
      if (!refinedComponent) initializeComponent();
      
      document.getElementById('static-container').style.display = 'none';
      document.getElementById('component-container').style.display = 'none';
      document.getElementById('comparison-container').style.display = 'block';
      
      // Clone elements for comparison
      const staticClone = document.querySelector('.static-container .universal-prompt-head').cloneNode(true);
      const componentClone = document.querySelector('.component-test-container .universal-prompt-head').cloneNode(true);
      
      document.getElementById('static-clone').innerHTML = '';
      document.getElementById('component-clone').innerHTML = '';
      document.getElementById('static-clone').appendChild(staticClone);
      document.getElementById('component-clone').appendChild(componentClone);
      
      logTest('Showing side-by-side comparison');
    }

    // Automated tests
    function runAutomatedTests() {
      if (!refinedComponent) initializeComponent();
      
      logTest('Running automated tests...');
      
      // Test HTML structure
      testHtmlStructure();
      testVisualLayout();
      testInteractiveElements();
      testPathResolution();
      testResponsiveBehavior();
      
      logTest('Automated tests completed');
    }

    function testHtmlStructure() {
      const staticHtml = document.querySelector('.static-container .universal-prompt-head').innerHTML;
      const componentHtml = document.querySelector('.component-test-container .universal-prompt-head').innerHTML;
      
      // Normalize whitespace for comparison
      const normalizeHtml = (html) => html.replace(/\s+/g, ' ').trim();
      const staticNormalized = normalizeHtml(staticHtml);
      const componentNormalized = normalizeHtml(componentHtml);
      
      const match = staticNormalized === componentNormalized;
      updateTestResult('html-match-result', match, match ? 'Structures match' : 'Structures differ');
      testResults.htmlMatch = match;
    }

    function testVisualLayout() {
      // Compare computed styles of key elements
      const staticHead = document.querySelector('.static-container .universal-prompt-head');
      const componentHead = document.querySelector('.component-test-container .universal-prompt-head');
      
      const staticStyle = window.getComputedStyle(staticHead);
      const componentStyle = window.getComputedStyle(componentHead);
      
      const keyProps = ['display', 'flexDirection', 'justifyContent', 'alignItems', 'padding', 'borderRadius'];
      let matches = 0;
      
      keyProps.forEach(prop => {
        if (staticStyle[prop] === componentStyle[prop]) matches++;
      });
      
      const passed = matches === keyProps.length;
      updateTestResult('visual-match-result', passed, `${matches}/${keyProps.length} properties match`);
      testResults.visualMatch = passed;
    }

    function testInteractiveElements() {
      const componentDropdown = document.querySelector('.component-test-container .services-dropdown');
      const componentToggle = document.querySelector('.component-test-container .sidebar-toggle');
      const componentDropdownMenu = document.querySelector('.component-test-container .services-popup-menu');
      
      const hasDropdown = !!componentDropdown;
      const hasToggle = !!componentToggle;
      const hasDropdownMenu = !!componentDropdownMenu;
      
      // Test dropdown menu initial state (should be hidden)
      let dropdownInitiallyHidden = false;
      if (componentDropdownMenu) {
        const computedStyle = window.getComputedStyle(componentDropdownMenu);
        dropdownInitiallyHidden = computedStyle.display === 'none';
      }
      
      const passed = hasDropdown && hasToggle && hasDropdownMenu && dropdownInitiallyHidden;
      
      let message = '';
      if (!hasDropdown) message += 'Missing dropdown trigger; ';
      if (!hasToggle) message += 'Missing sidebar toggle; ';
      if (!hasDropdownMenu) message += 'Missing dropdown menu; ';
      if (!dropdownInitiallyHidden) message += 'Dropdown menu not initially hidden; ';
      
      if (passed) message = 'All interactive elements present and properly configured';
      
      updateTestResult('interactive-result', passed, message.trim());
      testResults.interactiveElements = passed;
      
      // Add dropdown click test
      if (hasDropdown && hasDropdownMenu) {
        testDropdownFunctionality();
      }
    }
    
    function testDropdownFunctionality() {
      const componentDropdown = document.querySelector('.component-test-container .services-dropdown');
      const componentDropdownMenu = document.querySelector('.component-test-container .services-popup-menu');
      
      if (!componentDropdown || !componentDropdownMenu) return;
      
      // Test if clicking the dropdown does something (even if Webflow isn't fully loaded)
      let clickRegistered = false;
      
      // Add a temporary click listener to see if events fire
      const testClickHandler = (e) => {
        clickRegistered = true;
        logTest('Dropdown click detected - Webflow should handle the animation');
      };
      
      componentDropdown.addEventListener('click', testClickHandler);
      
      // Simulate click
      componentDropdown.click();
      
      // Clean up
      setTimeout(() => {
        componentDropdown.removeEventListener('click', testClickHandler);
        if (clickRegistered) {
          logTest('✅ Dropdown click functionality verified');
        } else {
          logTest('⚠️ Dropdown click not registered - may need Webflow initialization');
        }
      }, 100);
    }

    function testPathResolution() {
      const componentImages = document.querySelectorAll('.component-test-container img');
      let validPaths = 0;
      
      componentImages.forEach(img => {
        if (img.src && (img.src.includes('Fat-Logo.svg') || img.src.includes('GPT-Icon.svg') || img.src.includes('claude-logo.svg'))) {
          validPaths++;
        }
      });
      
      const passed = validPaths === componentImages.length && componentImages.length > 0;
      updateTestResult('path-result', passed, `${validPaths}/${componentImages.length} paths valid`);
      testResults.pathResolution = passed;
    }

    function testResponsiveBehavior() {
      // Simple test: check if element responds to container width changes
      const container = document.querySelector('.component-test-container');
      const originalWidth = container.style.width;
      
      container.style.width = '400px';
      const narrowLayout = window.getComputedStyle(document.querySelector('.component-test-container .universal-prompt-head'));
      
      container.style.width = '800px';  
      const wideLayout = window.getComputedStyle(document.querySelector('.component-test-container .universal-prompt-head'));
      
      container.style.width = originalWidth;
      
      // Basic responsive check
      const passed = narrowLayout.width !== wideLayout.width || narrowLayout.flexDirection !== wideLayout.flexDirection;
      updateTestResult('responsive-result', passed, passed ? 'Responsive behavior detected' : 'No responsive changes');
      testResults.responsiveBehavior = passed;
    }

    function updateTestResult(elementId, passed, message) {
      const element = document.getElementById(elementId);
      const indicator = element.parentElement.querySelector('.status-indicator');
      
      element.textContent = message;
      indicator.className = `status-indicator ${passed ? 'status-pass' : 'status-fail'}`;
    }

    // Component approval/rejection
    function approveComponent() {
      const totalTests = Object.keys(testResults).length;
      const passedTests = Object.values(testResults).filter(Boolean).length;
      
      if (totalTests === 0) {
        alert('Please run automated tests first!');
        return;
      }
      
      const passRate = passedTests / totalTests;
      if (passRate < 0.8) {
        if (!confirm(`Only ${passedTests}/${totalTests} tests passed (${Math.round(passRate * 100)}%). Are you sure you want to approve?`)) {
          return;
        }
      }
      
      if (confirm('This will replace the static implementation across all pages. Continue?')) {
        logTest('✅ Component APPROVED for deployment');
        alert('Component approved! Implementation can proceed.');
      }
    }

    function rejectComponent() {
      if (confirm('Reject the component and keep the static version?')) {
        logTest('❌ Component REJECTED - static version preserved');
        alert('Component rejected. Static version will be maintained.');
      }
    }

    // Utility functions
    function logTest(message) {
      const results = document.getElementById('test-results');
      const timestamp = new Date().toLocaleTimeString();
      results.textContent += `[${timestamp}] ${message}\n`;
      results.scrollTop = results.scrollHeight;
    }

    // Initialize
    document.addEventListener('DOMContentLoaded', function() {
      logTest('Testing interface loaded');
      logTest('Ready to test component vs static implementation');
    });
  </script>
</body>
</html>